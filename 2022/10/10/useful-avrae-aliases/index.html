<!DOCTYPE html>
<html lang="en-us">

  <head>

    <title>Useful Avrae Aliases • Ben Cardy</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Ben Cardy">


<meta property="og:title" content="Useful Avrae Aliases">
<meta property="og:description" content="Avrae is a Discord bot that makes running and playing D&D play-by-post games much easier—it provides useful tools such as integration with D&D Beyond, powerful dice-rolling options, and combat initiative tracking. However, there are some things it doesn't do well natively. For this, it provides a powerful …">
<meta property="og:url" content="/2022/10/10/useful-avrae-aliases/">
<meta property="og:site_name" content="Ben Cardy">
<meta property="og:type" content="article">


<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@benbacardi" />
<meta name="twitter:creator" content="@benbacardi" />


    <link rel="icon" type="image/svg+xml" href="/favicon.svg">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Jockey+One|Roboto:400,400italic,700&display=swap">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="stylesheet" href="/css/style.css">

    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="RSS" href="/feed.xml">

  </head>


  <body>

  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand" href="/">Ben Cardy</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">

          <li class="nav-item"><a class="nav-link" href="/pendulum/">Pendulum</a></li>
          <li class="nav-item"><a class="nav-link " href="/archive/">Archive</a></li>
          <li class="nav-item"><a class="nav-link " href="/categories/">Categories</a></li>
          <li class="nav-item"><a class="nav-link " href="/tags/">Tags</a></li>

        </ul>

        </ul>
      </div>
    </div>
  </nav>

  <div class="container mt-5">

  <div class="post single-post">

    <h1>
          Useful Avrae Aliases
    </h1>
    <small class="text-secondary">
      <a href="/2022/10/10/useful-avrae-aliases/" class="post-date">10 October 2022</a>
• <a href="/categories/#dd">D&D</a>        •
          <a href="/tags/#avrae">Avrae</a>
    </small>

    <p><a href="https://avrae.io/">Avrae</a> is a Discord bot that makes running and playing D&amp;D play-by-post games much easier—it provides useful tools such as integration with <a href="https://www.dndbeyond.com/">D&amp;D Beyond</a>, powerful dice-rolling options, and combat initiative tracking.</p>
<p>However, there are some things it doesn't do well natively. For this, it provides a powerful scripting API via <a href="https://avrae.readthedocs.io/en/latest/aliasing/aliasing.html">aliases and snippets</a> for you to extend its functionality with your own commands. Many people have written their own, and these are a few of the custom commands that we have set up in our games to make life just a little bit easier.</p>
<p>To use any of these aliases, paste the text in the code blocks below into a DM with Avrae (or any channel they are a member of).</p>
<h2>Quick Character Switcher</h2>
<p>When you link a character from D&amp;D Beyond, Avrae will remember it and allow you to use the character in combat and for ability checks, etc. However, if you're playing in multiple games, you have to constantly remember to change the active character to the correct one before continuing. We found a handy alias on the Avrae Developer's Discord for assigning characters to channels, so instead of remembering that "in this channel, I'm Kaith, but in this channel, I'm Elmer", you can just run <code>!ch</code> to switch to the right character for that game. I'm reproducing that here (tweaked for a recent Avrae update that deprecated a couple of the commands):</p>
<div class="highlight"><pre><span></span><code><span class="err">!</span><span class="n">alias</span> <span class="n">ch</span> <span class="p">{{</span><span class="n">c</span><span class="p">,</span><span class="nb">id</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">H</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">R</span><span class="o">=</span><span class="n">load_json</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span> <span class="k">if</span> <span class="n">exists</span><span class="p">(</span><span class="s1">&#39;chars&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="p">{},</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">id</span><span class="p">),</span><span class="s1">&#39;s&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span> <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">guild</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)}</span> <span class="p">,</span><span class="o">&amp;</span><span class="n">ARGS</span><span class="o">&amp;</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span><span class="o">&amp;</span><span class="n">ARGS</span><span class="o">&amp;</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;- This Channel&#39;</span><span class="p">,</span><span class="s1">&#39;- This Server&#39;</span> <span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%x</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">roll</span><span class="p">(</span><span class="s1">&#39;1d16777216&#39;</span><span class="p">)}}{{</span><span class="n">m</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="s1">&#39;add&#39;</span>  <span class="k">else</span> <span class="mi">2</span> <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="s1">&#39;delete&#39;</span>  <span class="k">else</span> <span class="mi">3</span> <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="s1">&#39;roster&#39;</span> <span class="k">else</span> <span class="mi">4</span> <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="s1">&#39;help?&#39;</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span> <span class="k">if</span> <span class="n">m</span> <span class="k">else</span> <span class="mi">0</span><span class="p">}}{{</span><span class="n">x</span><span class="o">=</span><span class="ow">not</span> <span class="n">m</span> <span class="ow">or</span> <span class="p">((</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">else</span> <span class="nb">id</span><span class="o">.</span><span class="n">c</span> <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="s1">&#39;chan&#39;</span> <span class="k">else</span> <span class="nb">id</span><span class="o">.</span><span class="n">s</span><span class="p">)</span> <span class="k">if</span> <span class="n">a</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span> <span class="k">else</span> <span class="nb">id</span><span class="o">.</span><span class="n">s</span><span class="p">)}}{{</span><span class="n">X</span><span class="o">=</span><span class="ow">not</span> <span class="n">m</span> <span class="ow">or</span> <span class="p">((</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">else</span> <span class="nb">id</span><span class="o">.</span><span class="n">c</span> <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="s1">&#39;chan&#39;</span> <span class="k">else</span> <span class="nb">id</span><span class="o">.</span><span class="n">s</span><span class="p">)</span> <span class="k">if</span> <span class="n">a</span> <span class="k">else</span> <span class="nb">id</span><span class="o">.</span><span class="n">s</span><span class="p">)}}{{</span><span class="n">name</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">X</span><span class="p">)}}{{</span><span class="n">emb</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39; -title &quot;Quick Character Changer&quot; -footer &quot;!ch [help|?] - Bring up the help window&quot; -color </span><span class="si">{</span><span class="n">R</span><span class="si">}</span><span class="s1"> &#39;</span><span class="p">}}{{</span><span class="n">A</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">c</span> <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="nb">id</span><span class="o">.</span><span class="n">c</span><span class="p">][:</span><span class="mi">1</span><span class="p">])</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">c</span> <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="nb">id</span><span class="o">.</span><span class="n">s</span><span class="p">][:</span><span class="mi">1</span><span class="p">])}}{{</span><span class="n">add</span><span class="o">=</span><span class="ow">not</span> <span class="n">m</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="ow">not</span>  <span class="n">a</span> <span class="ow">or</span> <span class="n">c</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">x</span><span class="p">:</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]})</span> <span class="ow">or</span> <span class="n">set_uvar</span><span class="p">(</span><span class="s1">&#39;chars&#39;</span><span class="p">,</span><span class="n">dump_json</span><span class="p">(</span><span class="n">c</span><span class="p">))</span> <span class="ow">or</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]}}{{</span><span class="n">delete</span><span class="o">=</span><span class="ow">not</span> <span class="n">m</span><span class="o">==</span><span class="mi">2</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">set_uvar</span><span class="p">(</span><span class="s1">&#39;chars&#39;</span><span class="p">,</span> <span class="n">dump_json</span><span class="p">(</span><span class="n">c</span><span class="p">))</span> <span class="ow">or</span> <span class="n">X</span><span class="p">}}{{</span><span class="s2">&quot;embed &quot;</span><span class="o">+</span><span class="n">emb</span><span class="o">+</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;-t 10 -desc &quot;Added `</span><span class="si">{</span><span class="n">add</span><span class="si">}</span><span class="s1">` to ID `</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">`.&quot;&#39;</span> <span class="k">if</span> <span class="p">(</span><span class="n">m</span><span class="o">==</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">a</span><span class="p">)</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;-t 10 -desc &quot;</span><span class="si">{</span><span class="s2">&quot;No char found for ID&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="sa">f</span><span class="s2">&quot;Removed `</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">` with ID&quot;</span><span class="si">}</span><span class="s1"> `</span><span class="si">{</span><span class="n">X</span><span class="si">}</span><span class="s1">`.&quot;&#39;</span> <span class="k">if</span> <span class="n">m</span><span class="o">==</span><span class="mi">2</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;-t 20 -f &quot;Roster| </span><span class="si">{</span><span class="n">n</span><span class="o">+</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">` - `</span><span class="si">{</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2"> ` </span><span class="si">{</span><span class="n">h</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nb">id</span><span class="o">.</span><span class="n">c</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">H</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">id</span><span class="o">.</span><span class="n">s</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nb">id</span><span class="o">.</span><span class="n">s</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">w</span><span class="si">}</span><span class="s2"> &quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">c</span><span class="p">])</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s2">&quot;*None*&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&quot;&#39;</span> <span class="k">if</span> <span class="n">m</span><span class="o">==</span><span class="mi">3</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;-f &quot;!ch|Changes to the appropriate character for the channel/server.&quot; -f &quot;!ch roster|View a list of all channel/server id</span><span class="se">\&#39;</span><span class="s1">s and the character they will load&quot; -f &quot;!ch add &lt;name&gt; [chan⏐id]|Adds `name` to the selected id. Default is server id, `chan` selects the channel id, or you can input the channel/server id manually&quot; -f &quot;!ch delete [chan⏐id]|Deletes the given id. Default is server id, `chan` selects the channel id, or you can input the channel/server id manually&quot; -f &quot;Current ID</span><span class="se">\&#39;</span><span class="s1">s|`Channel` - `</span><span class="si">{</span><span class="nb">id</span><span class="o">.</span><span class="n">c</span><span class="si">}</span><span class="s1">`</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1">`Server` - `</span><span class="si">{</span><span class="nb">id</span><span class="o">.</span><span class="n">s</span><span class="si">}</span><span class="s1">`&quot;&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">m</span> <span class="k">else</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;char </span><span class="si">{</span><span class="n">A</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">A</span> <span class="k">else</span> <span class="s2">&quot;embed -t 5 -desc &#39;Channel not found in list&#39;&quot;</span><span class="o">+</span><span class="n">emb</span><span class="p">)}}</span>
</code></pre></div>

<p>With that alias set, you can run <code>!ch add [character] chan</code> to assign the provided character to the current channel. Now, when you switch channels, you just have to run <code>!ch</code> to activate the right one.</p>
<p>However, remembering to run <code>!ch</code> is easier said than done. How many times have I switched to a channel and run <code>!g lr</code> to give my character a long rest, before realising that I hadn't switched and had just given one of my other characters a poorly-timed rest instead? To solve this, we put together an alias (worked out mostly by my friend <a href="https://www.flexpotential.com/">Madi</a>) designed to prefix any command you may want to run, that automatically switches before executing the actual command you asked for:</p>
<div class="highlight"><pre><span></span><code><span class="err">!</span><span class="n">alias</span> <span class="n">x</span> <span class="n">multiline</span>
<span class="o">&lt;</span><span class="n">drac2</span><span class="o">&gt;</span>
<span class="nb">id</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">id</span><span class="p">),</span><span class="s1">&#39;s&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">guild</span><span class="o">.</span><span class="n">id</span> <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">guild</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)}</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">load_json</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span> <span class="k">if</span> <span class="n">exists</span><span class="p">(</span><span class="s1">&#39;chars&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="p">{}</span>
<span class="n">n</span> <span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="n">A</span><span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">c</span> <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="nb">id</span><span class="o">.</span><span class="n">c</span><span class="p">][:</span><span class="mi">1</span><span class="p">])</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">c</span> <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="nb">id</span><span class="o">.</span><span class="n">s</span><span class="p">][:</span><span class="mi">1</span><span class="p">])</span>
<span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;!char </span><span class="si">{</span><span class="n">A</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="o">&lt;/</span><span class="n">drac2</span><span class="o">&gt;</span>
<span class="err">!</span><span class="o">&amp;*&amp;</span>
</code></pre></div>

<p>For me it's aliased to <code>x</code>, just to make it quick and easy to type. <code>!x check str</code> will always do a strength check for the right character for the game in <em>this</em> channel. <code>!x g lr</code> will always give the correct character a long rest. In combination with the <code>!ch</code> alias, this is probably the most handy alias I have set up—I only have to remember to always use <code>!x</code> instead of <code>!</code>, and it always just does the right thing.</p>
<h2>Feat Spells</h2>
<p>The other problem we frequently run into is using spells provided by feats. There are many feats that provide the with character additional spells; one's they're able to cast a particular number of times between rest, without using up spell slots. A good example is the <a href="https://www.dndbeyond.com/feats/magic-initiate">Magic Initiate</a> feat:</p>
<blockquote>
<p>Choose a class: bard, cleric, druid, sorcerer, warlock, or wizard. You learn two cantrips of your choice from that class's spell list.</p>
<ul>
<li>In addition, choose one 1st-level spell from that same list. You learn that spell and can cast it at its lowest level. Once you cast it, you must finish a long rest before you can cast it again using this feat.</li>
</ul>
</blockquote>
<p>Avrae only partially understands these. Pulling from D&amp;D Beyond, it creates a custom counter for each spell you've learned, with the correct number of "bubbles" for the amount of times you can use it, such as the example in the screenshot below:</p>
<p><img alt="Avrae custom counter output showing Magic Initiate - Command counter" src="/assets/avrae-1.png"></p>
<p>Here, Scrat (my Hadozee character) has the <strong>Magic Initiate (Cleric): Command</strong> counter, that corresponds to his background feat providing that 1-st level spell. Avrae's also added the spell to Scrat's spellbook (<code>!sb</code>), meaning Scrat is able to cast it. However, they're not linked together in any way. Casting the spell uses a spell slot (it shouldn't) and doesn't update the counter (it should). This means that instead, there are a number of things I need to remember to do when casting the spell:</p>
<ul>
<li>Firstly, check the custom counter to see if it's been used or not (i.e. is the spell available to me, or do I need a long rest first).</li>
<li>Cast the spell without using a spell slot (the <code>-i</code> flag to <code>!cast</code> or <code>!i cast</code> will do this).</li>
<li>Decrement the counter.</li>
</ul>
<p>To solve this, I wrote a short alias I call <code>!featcast</code>, which can be used in place of <code>!cast</code> (or <code>!i cast</code>) to handle the above three things:</p>
<div class="highlight"><pre><span></span><code><span class="err">!</span><span class="n">alias</span> <span class="n">featcast</span> <span class="p">{{</span><span class="n">a</span><span class="o">=&amp;</span><span class="n">ARGS</span><span class="o">&amp;</span><span class="p">}}{{</span><span class="n">H</span><span class="o">=</span><span class="ow">not</span> <span class="n">a</span> <span class="ow">or</span> <span class="s2">&quot;help&quot;</span> <span class="ow">in</span> <span class="n">a</span> <span class="ow">or</span> <span class="s2">&quot;?&quot;</span> <span class="ow">in</span> <span class="n">a</span><span class="p">}}{{</span><span class="n">s</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="n">H</span> <span class="ow">or</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">H</span> <span class="ow">or</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:])}}</span><span class="n">multiline</span>
<span class="o">&lt;</span><span class="n">drac2</span><span class="o">&gt;</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">H</span><span class="p">:</span>
    <span class="n">ch</span><span class="o">=</span><span class="n">character</span><span class="p">()</span>
    <span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">ccs</span><span class="o">=</span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ch</span><span class="o">.</span><span class="n">consumables</span> <span class="k">if</span> <span class="s2">&quot;:&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span> <span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="ow">or</span> <span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;: &quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()))]</span>
    <span class="n">cc</span><span class="o">=</span><span class="n">ccs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">ccs</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">cc</span><span class="p">:</span>
        <span class="n">t</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cc</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">cc</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">i</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
            <span class="k">if</span> <span class="n">combat</span><span class="p">():</span>
                <span class="n">i</span><span class="o">=</span><span class="s2">&quot;i &quot;</span>
            <span class="n">cc</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cc</span><span class="o">.</span><span class="n">value</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;!</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">cast &#39;</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">&#39; -i </span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;!embed -title &#39;Cannot cast </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">!&#39; -desc &#39;</span><span class="si">{</span><span class="n">ch</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> does not have any uses of </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2"> from the </span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2"> feat available.</span><span class="se">\n\n</span><span class="s2">**</span><span class="si">{</span><span class="n">cc</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">**</span><span class="se">\n</span><span class="si">{</span><span class="n">cc</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;!embed -title &#39;Could not find a </span><span class="se">\&quot;</span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2"> custom counter&#39; -desc &#39;Check that your feats for **</span><span class="si">{</span><span class="n">ch</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">** are set up correctly.&#39; -thumb &lt;image&gt;&quot;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;!embed -title &#39;Help for feat-casting&#39; -desc &#39;Use `!featcast &lt;spell&gt;` to cast a spell provided by a feat, instead of using your spell slots.&#39;&quot;</span>
<span class="o">&lt;/</span><span class="n">drac2</span><span class="o">&gt;</span>
</code></pre></div>

<p>It relies on the fact that Avrae names the custom counters sensibly, in the format of "Feat Name: Spell Name". When typing <code>!featcast command -t Target1 -t Target2</code>, it will look for a custom counter named in that way that could possibly match the provided spell name. When it finds one, it checks for a free slot, and casts the spell (with the provided arguments), decrementing the counter.</p>
<p>There are many feats and backgrounds that provide spells, and this alias has made handling them <em>much</em> easier. Hopefully it can be of some use in your games too!</p>

  </div>
  </div>

  <div class="footer"><a rel="me" href="https://snailedit.social/@benbacardi"></a></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

  </body>
</html>